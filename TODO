Use thresholds so it can work with files that are not only black/white.

Use a QR code reading framework in the background to make it able to read codes from photos.

Optimize output. One possibility is to merge adjacent blocks. If N blocks are adjacent, they should be replaced by a single block that is size N - 0.01 in the direction they are lying. Naturally, this can be done either horizontally or vertically, so ideally we should do both and output the smallest model of the two.
